(function(_,v){typeof exports=="object"&&typeof module<"u"?v(exports):typeof define=="function"&&define.amd?define(["exports"],v):(_=typeof globalThis<"u"?globalThis:_||self,v(_.oidlib={}))})(this,function(_){"use strict";var Gs=Object.defineProperty;var Qs=(_,v,U)=>v in _?Gs(_,v,{enumerable:!0,configurable:!0,writable:!0,value:U}):_[v]=U;var H=(_,v,U)=>Qs(_,typeof v!="symbol"?v+"":v,U);const v=(s,...e)=>String.raw({raw:s},...e),U=(s,...e)=>String.raw({raw:s},...e);class j{constructor(){this._listeners={},this._listenersRgx=[],this._providers={},this._pendingCnx={}}subscribe(e,t){if(e!=null){let i={};typeof e=="string"&&t!=null?i[e]=t:typeof e=="object"&&(i=e);const n=this._listenersRgx.slice(),r={...this._listeners};for(const o in i)i[o]!=null&&(o.includes("+")||o.includes("#")?n.push([j._convertRegExp(o),i[o],o]):(r[o]==null?r[o]=[]:r[o]=r[o].slice(),r[o].push(i[o])));this._listenersRgx=n,this._listeners=r}}unsubscribe(e){if(e!=null){let t={};typeof e=="string"&&handler!=null?t[e]=handler:typeof e=="object"&&(t=e);const i=this._listenersRgx.slice(),n={...this._listeners};for(const r in t)if(r.includes("+")||r.includes("#")){for(const o in i)if(i[o][1]===t[r]&&i[o][2]==r){i.splice(o,1);break}}else if(n[r]!=null){for(const o in n[r])if(n[r][o]===t[r]){n[r]=n[r].toSplice(o,1);break}}this._listenersRgx=i,this._listeners=n}}async publish(e,t){if(this._listeners[e]!=null)for(const n of this._listeners[e])n(e,t);const i=this._listenersRgx;for(const n of i){const r=n[0].exec(e);r!=null&&r[0]===e&&n[1](e,t)}}static _convertRegExp(e){return new RegExp(e.replace(/\//g,"\\/").replace(/\+/g,"[^/]+").replace(/#/g,".+"))}provide(e,t,i){let n=!1;if(t!=null&&e!=null&&i!=null){const r=e+"#"+t;if(this._providers[r]==null&&(n=!0,this._providers[r]=i,this._pendingCnx[r]!=null)){for(let o of this._pendingCnx[r])o.connectionReady(e,t,i);delete this._pendingCnx[r]}}return n}withhold(e,t){let i=!1;if(t!=null&&e!=null){const n=e+"#"+t;this._providers[n]&&(i=!0,delete this._providers[n])}return i}connect(e,t,i){let n=!1;if(t!=null&&e!=null&&i!=null){const r=`${e}#${t}`;this._providers[r]?i.connectionReady(e,t,this._providers[r]):this._pendingCnx[r]?this._pendingCnx[r].push(i):this._pendingCnx[r]=[i],n=!0}return n}async invoke(e,t,i,n){const r=`${e}#${t}`;return this._providers[r]!=null?await this._providers[r].handleInvoke(e,i,n):null}}j.i=new j;const X={id:"default",bus:j.i,stylesheets:"<auto>",stydefault:["stylesheets:oid.min.css"],assets:"/assets/"};class R{constructor(e,t,i,n,r){if(this._id=e||null,this._bus=t||R.i.bus,this._stydefault=n||R.i.stydefault,this._stylesheets=i||R.i.stylesheets,this._stylesheets==="<auto>"&&this._stydefault){const o=this._stydefault[0].split(/[:\/]/).pop(),l=document.querySelectorAll('link[rel="stylesheet"]');for(const u of l)if(u.href&&u.href.endsWith(o)){this._stylesheets=u.href.slice(0,-o.length);break}}this._assets=r||R.i.assets}static create(e,t,i,n,r){if(e!=null&&R._spheres[e]!=null)throw new Error(`Sphere with id ${e} already exists`);const o=new R(e,t,i,n,r);return e!=null&&(R._spheres[e]=o),o}static get(e){return e&&R._spheres[e]||null}get id(){return this._id}get bus(){return this._bus}set stylesheets(e){this._stylesheets=e}get stylesheets(){return this._stylesheets}set stydefault(e){this._stydefault=e}get stydefault(){return this._stydefault}set assets(e){this._assets=e}get assets(){return this._assets}}R._spheres={},R.i=R.create(X.id,X.bus,X.stylesheets,X.stydefault,X.assets);class z extends HTMLElement{connectedCallback(){if(this.hasAttribute("global"))this._sphere=R.i,this.hasAttribute("stylesheets")&&(R.i.stydefault=this.getAttribute("stylesheets")),this.hasAttribute("stydefault")&&(R.i.stydefault=this.getAttribute("stydefault")),this.hasAttribute("assets")&&(R.i.assets=this.getAttribute("assets"));else{const e=this.getAttribute("id");R.get(e)?this._sphere=R.get(e):this._sphere=R.create(this.getAttribute("id"),new j,this.getAttribute("stylesheets"),this.getAttribute("stydefault"),this.getAttribute("assets"))}}get id(){return this._sphere.id}get stylesheets(){return this._sphere.stylesheets}get stydefault(){return this._sphere.stydefault}get assets(){return this._sphere.assets}get sphere(){return this._sphere}}z.elementTag="oid-sphere",customElements.define(z.elementTag,z);class xe extends HTMLElement{constructor(){super(),this._sphere=null}get _bus(){return this._sphere==null?null:this._sphere.bus}connectedCallback(){let e=this._findAggregator(z);e!=null?this._sphere=e.sphere:this._sphere=R.i}_findAggregator(e){let t=this.parentNode!=null?this.parentNode:this instanceof DocumentFragment?this.host:null;for(;t!=null&&!(t instanceof e);)t=t.parentNode!=null?t.parentNode:t instanceof DocumentFragment?t.host:null;return t}_subscribe(e,t){this._bus!=null&&this._bus.subscribe(e,t)}_unsubscribe(e,t){this._bus.unsubscribe(e,t)}async _publish(e,t){await this._bus.publish(e,t)}_provide(e,t,i){this._bus.provide(e,t,i)}_withhold(e,t){this._bus.withhold(e,t)}_connect(e,t,i){this._bus.connect(e,t,i)}async _invoke(e,t,i,n){return await this._bus.invoke(e,t,i,n)}}class pe extends xe{constructor(){super(),this._mapTopicNotice={},this._rgxTopicNotice=[],this._mapNoticeTopic={},this._receiveHandler={},this._provideHandler={},this._connected={},this._convertNotice=this._convertNotice.bind(this),this.handleNotice=this.handleNotice.bind(this)}async connectedCallback(){super.connectedCallback(),await this._initialize()}disconnectedCallback(){this._finalize()}async _initialize(){const e=this.constructor.spec;if(e&&(this._buildHandlers(this._receiveHandler,e.receive),this._buildProviders(),this._buildProvidersHandlers(),this._buildEventDispatchers(e.dispatcher)),e&&e.properties)for(const[t,i]of Object.entries(e.properties))i.default!=null&&!this.hasAttribute(t)&&(this[t]=i.default);this.hasAttribute("custom")&&(this._custom=await S.getCustom(e.id,this.getAttribute("custom"))),this.hasAttribute("publish")&&this._publishNoticeTopic(this.getAttribute("publish")),this.hasAttribute("subscribe")&&this._subscribeTopicNotice(this.getAttribute("subscribe")),this.hasAttribute("connect")&&this._connectInterface(this.getAttribute("connect"))}_buildProviders(){const e=this.constructor.spec;if(e.provide!=null&&this.id)for(const t in e.provide)this._provide(t,this.id,this)}_buildProvidersHandlers(){const e=this.constructor.spec;if(e.provide!=null)for(const t in e.provide)this._buildHandlers(this._provideHandler,e.provide[t].operations,t)}_removeProviders(){const e=this.constructor.spec;if(e.provide!=null&&this.id)for(const t in e.provide)this._withhold(t,this.id)}_buildHandlers(e,t,i){if(t!=null){const n=i==null?"":i+".";if(Array.isArray(t))for(const r of t)e[n+r]==null&&(e[n+r]=this["handle"+r[0].toUpperCase()+r.slice(1)].bind(this));else for(const[r,o]of Object.entries(t))if(e[n+r]==null){const l=typeof o=="string"?o:o.handler!=null?o.handler:"handle"+r[0].toUpperCase()+r.slice(1);e[n+r]=this[l].bind(this)}}}_buildEventDispatchers(e){if(e){this._dispatcher=[];for(const[t,i,n]of e)this._dispatcher.push([t,i,n.bind(this)])}}_finalize(){this._removeProviders();for(const e in this._mapTopicNotice)this._mapTopicNotice[e]!=e?this._unsubscribe(e,this._convertNotice):this._unsubscribe(e,this.handleNotice)}attributeChangedCallback(e,t,i){const n=e.replace(/-([a-z])/g,(r,o)=>o.toUpperCase());this[n]=i}static get observedAttributes(){return["id"]}get id(){return this._id}set id(e){this._id!=null&&this._bus!=null&&this._removeProviders(),this._id=e,this._bus!=null&&this._buildProviders()}get publish(){return this.getAttribute("publish")}get subscribe(){return this.getAttribute("subscribe")}get connect(){return this.getAttribute("connect")}handleGet(e,t){return t.property!=null?this[t.property]:null}handleSet(e,t){t.property!=null&&t.value!=null&&(this[t.property]=t.value)}_subscribeTopicNotice(e){const t=e.split(";");for(const i of t){const n=i.split("~");if(n.length>1){const r=n[0].trim();r.includes("+")||r.includes("#")?this._rgxTopicNotice.push([j._convertRegExp(r),n[1].trim(),r]):this._mapTopicNotice[r]=n[1].trim(),this._subscribe(r,this._convertNotice)}else{const r=i.trim();this._mapTopicNotice[r]=r,this._subscribe(r,this.handleNotice)}}}_publishNoticeTopic(e){const t=e.split(";");for(const i of t){const n=i.split("~");n.length>1?this._mapNoticeTopic[n[0].trim()]=n[1].trim():this._mapNoticeTopic[i.trim()]=i.trim()}}_connectInterface(e){let t=!0;const i=e.split(";");for(const n of i){const r=n.split("#");r.length>1?this._connect(r[0].trim(),r[1].trim(),this):t=!1}return t}_notify(e,t){this._mapNoticeTopic[e]!=null&&this._publish(this._mapNoticeTopic[e],t)}_convertNotice(e,t){if(this._mapTopicNotice[e]!=null)this.handleNotice(this._mapTopicNotice[e],t);else for(const[i,n]of this._rgxTopicNotice){const r=i.exec(e);if(r!=null&&r[0]===e){this.handleNotice(n,t);break}}}connectTo(e,t){t.id&&this._connect(e,t.id,this)}connectionReady(e,t,i){this._connected[e]==null&&(this._connected[e]=[]),this._connected[e].push(t)}async _invoke(e,t,i){const n=S.getInterface(e);if(this._connected[e]!=null)if(n.response!=null&&n.response===!0){const r=[];for(const o of this._connected[e])r.push(await this._bus.invoke(e,o,t,i));return r}else for(const r of this._connected[e])return await this._bus.invoke(e,r,t,i)}handleNotice(e,t){const i=e&&e.includes("/")?e.split("/")[0]:e;this._receiveHandler[i]!=null&&this._receiveHandler[i](e,t)}async handleInvoke(e,t,i){let n=null;return this._provideHandler[`${e}.${t}`]!=null&&(n=await this._provideHandler[`${e}.${t}`](t,i)),n}_customExists(e){return this._custom!=null&&this._custom.hasOwnProperty(e)}_getCustomField(e){return this._custom==null||this._custom[e]==null?null:this._custom[e]}_callCustom(e,t){if(this._custom!=null&&this._custom[e]!=null)return this._custom[e](this,t)}}class M extends pe{}class P extends M{async connectedCallback(){await super.connectedCallback(),this._stylesheets=this.constructor.spec.stylesheets.replace('href="default"','href="'+this._sphere.stydefault+'"').replace('href="stylesheets:','href="'+this._sphere.stylesheets),this.render()}render(){const e=this.constructor.spec;let t=e!=null?e.template:null;if(this.template){const i=this.template();if(i!=this._template){this._template=i;const n=S.prepareDispatchers(i,this.constructor);this._templatePre=n.template,this._buildEventDispatchers(n.dispatcher,this)}t=this._templatePre}if(this._presentation=null,e!=null&&t!=null){let i=this._getCustomField("style");i=i?`<style>${i}</style>`:"";const n=(this._stylesheets+e.styles+i+t).replace(/{{[ \t]*(url:)?[ \t]*this\.([^}]*)}}/g,(r,o,l)=>{l=l?l.trim():"";let u=this[l]?this[l]:"";return o==="url:"&&(u=u.replace("assets:",this._sphere.assets)),u});if(e.shadow===!1?(this.innerHTML=n,this._presentation=this.querySelector("#oid-prs")||this):this._presentation=this._shadowHTML(n),this._dispatcher){const r=e.shadow===!1?this:this.shadowRoot;for(const[o,l,u]of this._dispatcher)r.querySelector("["+o+"]").addEventListener(l,u)}}}_shadowHTML(e){const t=P.prepareShadow(this,e);return this.shadowRoot.querySelector("#oid-prs")||t}static prepareShadow(e,t){const i=document.createElement("template");i.innerHTML=t;const n=document.importNode(i.content,!0);return e.shadowRoot?e.shadowRoot.innerHTML="":e.attachShadow({mode:"open"}),e.shadowRoot.appendChild(n),n}}const g=class g{static cInterface(e){e!=null&&(g._interfaceReg[e.id]=e)}static getInterface(e){return g._interfaceReg[e]}static component(e){e=Object.assign({},g._defaultSpec,e);let t=e.implementation;if(t==null){const r=e.ui===!1||e.template==null?e.element==null?pe:M:P,o=e.element[0].toUpperCase()+e.element.slice(1).replace(/-([a-z])/g,(l,u)=>u.toUpperCase());t=class extends r{},Object.defineProperty(t,"name",{value:o})}const i=t.observedAttributes.slice();if(e.properties){Object.defineProperty(t,"observedAttributes",{get:function(){return this.observed}});for(const r in e.properties){const o=e.properties[r],l=r.replace(/-([a-z])/g,(u,c)=>c.toUpperCase());Object.defineProperty(t.prototype,l,o.readonly?{get:function(){return this["_"+l]}}:t.prototype.render==null?{get:function(){return this["_"+l]},set:function(u){this["_"+l]=u}}:{get:function(){return this["_"+l]},set:function(u){const c=this["_"+l];this["_"+l]=u,c!=u&&this._sphere&&this.render()}}),(o.attribute==null||o.attribute!==!1)&&i.push(r)}}if(e.provide=e.provide==null?g.defaultInterface:e.provide.concat(g.defaultInterface),e.provide){const r={};for(const o of e.provide){const l=g._interfaceReg[o];if(l==null)throw new Error("Unknown interface id: "+o);r[o]=l}e.provide=r}g.stylePreprocess(e);const n=g.prepareDispatchers(e.template,t);e.template=n.template,n.dispatcher&&(e.dispatcher=n.dispatcher),Object.assign(t,{spec:e,observed:i}),e.element==null&&(e.element="internal-"+e.id.replace(":","-")),customElements.define(e.element,t),g._oidReg[e.id]=t}static componentSet(e,t){if(e!=null&&g._oidReg[e]!=null){const i=g._oidReg[e].spec;for(const n in t)i[n]=t[n];g.stylePreprocess(i)}}static stylePreprocess(e){let t="";if(e.stylesheets){let i=e.stylesheets;Array.isArray(i)||(i=[i]);for(const n of i)t+=`<link href="${n}" rel="stylesheet">`}e.stylesheets=t,e.styles=e.styles?`<style>${e.styles}</style>`:""}static prepareDispatchers(e,t){let i=null;if(e){let n=1;const r=e.split(/@([^= >]*)[ \t]*(?:=[ \t]*{{[ \t]*this\.([^}]*)[ \t]*}})?/);if(r.length>1){i=[];let o="";for(let l=0;l+2<r.length;l+=3){o+=r[l]+g.eventAttribute+n+" ";const u=r[l+1].trim(),c=r[l+2]!=null?r[l+2].trim():"_on"+u[0].toUpperCase()+u.substring(1);i.push([g.eventAttribute+n,u,t.prototype[c]]),n++}e=o+r[r.length-1]}}return{template:e,dispatcher:i}}static create(e,t){const i=g._oidReg[e];if(i==null)throw new Error("Unknown component id: "+e);const n=document.createElement(i.spec.element);if(t!=null)for(const r in t)n.setAttribute(r,t[r]);return n}static customize(e,t){e!=null&&g._oidReg[e]!=null&&t!=null&&t.cid!=null&&(g._oidCustom[e+"."+t.cid]=t,g._customQueue[e+"."+t.cid]!=null&&(g._customQueue[e+"."+t.cid](),delete g._customQueue[e+"."+t.cid]))}static async getCustom(e,t){return e==null||t==null?null:(g._oidCustom[e+"."+t]==null&&await new Promise((n,r)=>{const o=function(){n()};g._customQueue[e+"."+t]=o}),g._oidCustom[e+"."+t])}static setDefault(e){this._defaultSpec=e}static addDefault(e){for(const t in e)this._defaultSpec[t]==null?this._defaultSpec[t]=e[t]:Array.isArray(this._defaultSpec[t])?this._defaultSpec[t]=this._defaultSpec[t].concat(e[t]):typeof this._defaultSpec[t]=="object"?Object.assign(this._defaultSpec[t],e[t]):this._defaultSpec[t]=e[t]}};H(g,"eventAttribute","oidevent_"),H(g,"defaultInterface",["itf:oid"]),H(g,"_interfaceReg",{}),H(g,"_oidReg",{}),H(g,"_oidCustom",{}),H(g,"_customQueue",{}),H(g,"_defaultSpec",{});let S=g;S.cInterface({id:"itf:oid",operations:{get:{response:!0},set:{response:!1}},flow:"pull"}),S.cInterface({id:"itf:transfer",operations:["send"],flow:"push"}),S.cInterface({id:"itf:storage",operations:["store","load"],flow:"pull"}),S.cInterface({id:"itf:iterate",operations:{first:{response:!0},next:{response:!0}},flow:"pull",connections:"1"});class L extends z{connectedCallback(){super.connectedCallback();const e=this._prepareHTML(),t=L.template.replace("{stylesheet}",this.stylesheet).replace("{code}",L.code.replace("{html}",e).replace("{rows}",this._rows(e))).replace("{console}",this.messages?L.console.replace("{rows}",this.rows?this.rows:L.rows):"");P.prepareShadow(this,t),this._scriptPanel=this.shadowRoot.querySelector("#script"),this._unlockScript=this._unlockScript.bind(this),this._scriptPanel.addEventListener("click",this._unlockScript),this._buttonRender=this.shadowRoot.querySelector("#btn-render"),this._buttonRender.addEventListener("click",this._computeRender.bind(this)),this._observer=new MutationObserver(this._scriptUpdated.bind(this)),this._observer.observe(this,{attributes:!0,childList:!0,subtree:!0}),this.sphere.bus.subscribe("#",this._busMonitor.bind(this))}static get observedAttributes(){return z.observedAttributes.concat(["messages","rows"])}get messages(){return this.hasAttribute("messages")}set messages(e){this.setAttribute("messages",e)}get rows(){return this.getAttribute("rows")}set rows(e){this.setAttribute("rows",e)}_scriptUpdated(e,t){const i=this._prepareHTML();this._scriptPanel.value=i,this._scriptPanel.rows=this._rows(i)}_rows(e){const t=e.split(/\r\n|\r|\n/);let i=0;return t.forEach(n=>{i+=Math.floor(n.length/45)+1}),i}_prepareHTML(){let e=this.innerHTML.replace('=""',"").replace(/^[\r\n]+/,"").replace(/[\r\n]+$/,"");if(e.startsWith(" ")||e.startsWith("	")){const t=e.match(/^[ \t]+/);e=e.replace(new RegExp("^"+t,"gm"),"")}return e}_unlockScript(){this._scriptPanel.removeEventListener("click",this._unlockScript),this._scriptPanel.readOnly=!1,this._buttonRender.style.display="initial"}_computeRender(){this.shadowRoot.querySelector("#render").innerHTML=this._scriptPanel.value}_busMonitor(e,t){e!="bus/monitor"&&this.sphere.bus.publish("bus/monitor",{value:`[${e}] ${JSON.stringify(t)}`})}}L.rows=5,L.code=v`<div style="width:100%;display:flex">
<textarea id="script" class="code" style="width:100%;cursor:pointer" rows="{rows}" readonly>{html}</textarea>
<button id="btn-render" class="btn btn-secondary" style="width:auto;display:none">Render</button>
</div>`,L.template=v`<link rel="stylesheet" href="{stylesheet}">
{code}
<div id="render"><slot></slot></div>
{console}`,L.console=v`<div id="msg-pnl" style="width:100%">
  <b>Messages on the Bus</b><br>
  <console-oid rows="{rows}" class="code" prompt="" subscribe="bus/monitor~display"></console-oid>
</div>`,L.elementTag="oid-play",customElements.define(L.elementTag,L);class Te extends M{async handleSubmit(e,t){const i={},n=this._getCustomField("schema");let r=null;if(n!=null)for(const o of Object.keys(n)){const l=document.querySelector(`#${o}`);l!=null&&(i[o]=l.value)}else{for(r=this.parentNode;r!=null&&r.nodeName.toLowerCase()!=="form";)r=r.parentNode;if(r!=null)for(const o of r)o.type==="radio"||o.type==="checkbox"?o.checked&&(o.type==="checkbox"||!o.hasAttribute("name")?i[o.id]=o.value:i[o.name]=o.value):i[o.id]=o.value}(!this._customExists("pre")||this._callCustom("pre",i)===!0)&&(this._notify("submit",i),this._notify("dispatch",{value:i}),this._invoke("itf:transfer","send",{value:i}))}handleUpdate(e,t){if(t.value){let i=this.parentNode;for(;i!=null&&i.nodeName.toLowerCase()!=="form";)i=i.parentNode;if(i!=null)for(const n of i)n.type==="radio"||n.type==="checkbox"?n.checked&&(n.type==="checkbox"||!n.hasAttribute("name")?n.value=t.value[n.id]:n.value=t.value[n.name]):n.value=t.value[n.id]}}}S.component({id:"oid:submit",element:"submit-oid",receive:["submit","update"],implementation:Te});class Ce extends P{template(){let e=this.selection==="both"?v`<div class="group">`:"";return(this.selection==="drop"||this.selection==="both")&&(e+=v`<div class="drop" @dragover @drop>{{this.dropLabel}}</div>`),(this.selection==="dialog"||this.selection==="both")&&(e+=v`<input type="file" class="selector" @change></input>`),this.selection==="both"&&(e+="</div>"),e}_onDragover(e){this.pre&&(this._presentation.innerHTML=this.dropPre),e.preventDefault()}async _onDrop(e){e.preventDefault(),this.post&&(this._presentation.innerHTML=this.dropPost);let t=null;if(e.dataTransfer.items)for(const n of e.dataTransfer.items)n.kind==="file"&&(t=n.getAsFile());else t=e.dataTransfer.files[0];let i=await t.text();this.filetype==="json"&&(i=JSON.parse(i)),this._notify("dispatch",{value:i}),this._invoke("itf:transfer","send",{value:i})}_onChange(e){const t={},i=e.target.files[0];if(!i)t.error="No file selected";else{const n=new FileReader;n.onload=r=>{t.value=r.target.result,this.filetype==="json"&&(t.value=JSON.parse(t.value))},n.onerror=r=>{t.error=`Error reading file: ${r.target.error}`},n.readAsText(i)}this._notify("dispatch",t),this._invoke("itf:transfer","send",t)}handleRetrieve(e,t){}handleStore(e,t){let i=t.value||"";this.filetype==="json"&&(i=JSON.stringify(i));const n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=window.URL.createObjectURL(new Blob([i],{type:"text/plain"})),n.setAttribute("download",t.filename||this.filename),n.click(),window.URL.revokeObjectURL(n.href),document.body.removeChild(n)}}S.component({id:"oid:file",element:"file-oid",properties:{selection:{default:"both"},dropLabel:{default:"Drop Zone"},dropPre:{default:"Drop your file here"},dropPost:{default:"File loaded"},filename:{default:"file.txt"},filetype:{default:"plain"}},receive:["retrieve","store"],implementation:Ce,styles:U`
  .group {
    display: flex;
    width: 100%;
    height: 100%;
  }
  .drop {
    width: 50%;
    border: 5px solid;
  }
  .selector {
    flex: 1;
  }`});class ke extends M{async handleLoad(e,t){const i=`${this.dataset}:${t.collection||this.collection}:${t.key||this.key}`,n=JSON.parse(localStorage.getItem(i));return this._notify("dispatch",{value:n}),this._invoke("itf:transfer","send",{value:n}),{value:n}}async handleStore(e,t){let i=!1;if(t.value){const n=`${this.dataset}:${t.collection||this.collection}:${t.key||this.key}`;localStorage.setItem(n,JSON.stringify(t.value)),i=!0}return i}}S.component({id:"oid:local-storage",element:"local-storage-oid",receive:["load","store"],provide:["itf:storage"],properties:{dataset:{default:"default-mundorum-oid"},collection:{default:"default"},key:{default:"default"}},implementation:ke});class Ne extends M{async handleLoad(e,t){const i={};if(t.filename==null&&this.filename==null)i.error="No file name provided";else{const n=t.filename||this.filename,r=await fetch(`${n}`);r.ok?i.value=await r.json():i.error="Failed to load JSON"}return this._notify("dispatch",i),this._invoke("itf:transfer","send",i),i}}S.component({id:"oid:json-file",element:"json-file-oid",receive:["load"],properties:{filename:{}},implementation:Ne});class Pe extends P{_onClick(){this._notify("click",{value:this.label||this.source})}_onMouseenter(){this._notify("mouseenter",{value:this.label||this.source})}_onMouseleave(){this._notify("mouseleave",{value:this.label||this.source})}}S.component({id:"oid:image",element:"image-oid",properties:{source:{default:"assets:images/image.svg"},label:{}},implementation:Pe,stylesheets:"default",template:v`
  <image id="oid-prs" src="{{url:this.source}}" alt="{{this.label}}"
    @click @mouseenter @mouseleave>`});class Le extends P{_onClick(){this._callCustom("click"),this._notify("click",{value:this.value||this.label}),this._invoke("itf:transfer","send",{value:this.value||this.label})}_onMouseenter(){this._notify("mouseenter",{value:this.value||this.label})}_onMouseleave(){this._notify("mouseleave",{value:this.value||this.label})}}S.component({id:"oid:button",element:"button-oid",properties:{label:{},value:{}},implementation:Le,stylesheets:"default",template:v`
  <button id="oid-prs" class="btn btn-primary"
    @click @mouseenter @mouseleave>
    {{this.label}}
  </button>`});class Fe extends P{handleSend(e,t){this._presentation&&t&&t.value&&typeof t.value=="object"&&(t.value=JSON.stringify(t.value)),this._presentation.value+=(this.prompt.length>0?`${this.prompt} `:"")+`${t.value}
`}}S.component({id:"oid:console",element:"console-oid",properties:{prompt:{default:">"},rows:{default:10}},receive:{display:"handleSend"},provide:["itf:transfer"],implementation:Fe,styles:U`
  .console {
    width: 100%;
    font-family: "Courier New", monospace;
    font-size: 1em;
    background-color: lightgray
  }`,template:v`
  <textarea class="console" rows="{{this.rows}}" id="oid-prs" readonly></textarea>`});class Ue extends P{connectedCallback(){this._value=this.getAttribute("value")||!1,super.connectedCallback()}static get observedAttributes(){return P.observedAttributes.concat(["variable","value"])}get variable(){return this._variable}set variable(e){this._variable=e}get value(){return this._value}set value(e){this._value=e}}class De extends Ue{connectedCallback(){super.connectedCallback(),this.hasAttribute("value")&&(this.value=this.getAttribute("value")!=="off",this.render()),this._notify("initial",{value:this.value?this.on:this.off})}render(){super.render(),this._input=this._presentation.querySelector("#oid-input"),this._input.checked=this.value}handleInvert(e,t){this.value=!this.value,this.value?this._input.checked=!0:this._input.checked=!1,this._notifyState()}handleOn(){this.value=!0,this._input.checked=!0,this._notifyState()}handleOff(){this.value=!1,this._input.checked=!1,this._notifyState()}handleRepublish(e,t){this.value&&this._notify("republish",t)}_onInput(){this._value=this._input.checked,this._notifyState()}_notifyState(){const e=this._value?this.on:this.off;this._notify("change",{value:e}),this._notify(e,{value:e})}}S.component({id:"oid:switch",element:"switch-oid",properties:{on:{default:"on"},off:{default:"off"}},receive:["invert","on","off","republish"],implementation:De,styles:U`
  .switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 34px;
  }
  .switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    -webkit-transition: .4s;
    transition: .4s;
  }
  .slider:before {
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
  }
  input:checked + .slider {
    background-color: #2196F3;
  }
  input:focus + .slider {
    box-shadow: 0 0 1px #2196F3;
  }
  input:checked + .slider:before {
    -webkit-transform: translateX(26px);
    -ms-transform: translateX(26px);
    transform: translateX(26px);
  }
  .slider.round {
    border-radius: 34px;
  }
  .slider.round:before {
    border-radius: 50%;
  }`,template:v`
  <label id="oid-prs" class="switch">
    <input id="oid-input" type="checkbox" @input>
    <span class="slider round"></span>
  </label>`});class Be extends Ue{connectedCallback(){super.connectedCallback(),this.hasAttribute("value")||(this.value=Math.round((parseInt(""+this.min)+parseInt(""+this.max))/2),this.render()),this._notify("initial",{value:this.value})}render(){super.render(),this._input=this._presentation.querySelector("#oid-input"),this.hasAttribute("index")&&(this._index=this._presentation.querySelector("#index"),this._index.innerHTML=this.value)}_onInput(){this._value=this._input.value,this.hasAttribute("index")&&(this._index.innerHTML=this.value),this._notify("change",{value:this.value})}}S.component({id:"oid:slider",element:"slider-oid",properties:{min:{default:0},max:{default:100},index:{default:!1}},implementation:Be,stylesheets:"default",template:v`
  <div id="oid-prs" style="width:100%; display:flex; flex-direction:row">
    <span id="index" style="flex:initial"></span>
    <input type="range" id="oid-input" min="{{this.min}}" max="{{this.max}}"
           value="{{this.value}}" style="flex:auto" @input>
  </div>`});class je extends P{constructor(){super(),this._x=0,this._y=0,this._sideASize=0,this._onMousemove=this._onMousemove.bind(this),this._onMouseup=this._onMouseup.bind(this)}async connectedCallback(){await super.connectedCallback(),this._horz=this.split!=="vertical",this._resizer=this.shadowRoot.getElementById("resizer"),this._sidea=this.shadowRoot.getElementById("sidea"),this._sideb=this.shadowRoot.getElementById("sideb"),this._horz?(this._resizer.style.cursor="ew-resize",this._resizer.style.height="100%",this._resizer.classList.add("divide-x"),this._sidea.style.width=this.proportion):(this._resizer.style.cursor="ns-resize",this._presentation.style.flexDirection="column",this._resizer.style.width="100%",this._resizer.classList.add("divide-y"),this._sidea.style.height=this.proportion)}_onMousedown(e){this._x=e.clientX,this._y=e.clientY,this._sideASize=this._horz?this._sidea.getBoundingClientRect().width:this._sidea.getBoundingClientRect().height,this.shadowRoot.addEventListener("mousemove",this._onMousemove),this.shadowRoot.addEventListener("mouseup",this._onMouseup)}_onMousemove(e){const t=e.clientX-this._x,i=e.clientY-this._y;if(this._horz){const n=(this._sideASize+t)*100/this._presentation.getBoundingClientRect().width;this._sidea.style.width=n+"%",this._resizer.style.cursor="col-resize",document.body.style.cursor="col-resize"}else{const n=(this._sideASize+i)*100/this._presentation.getBoundingClientRect().height;this._sidea.style.height=n+"%",this._resizer.style.cursor="row-resize",document.body.style.cursor="row-resize"}this._sidea.style.userSelect="none",this._sidea.style.pointerEvents="none",this._sideb.style.userSelect="none",this._sideb.style.pointerEvents="none"}_onMouseup(e){this.shadowRoot.removeEventListener("mousemove",this._onMousemove),this.shadowRoot.removeEventListener("mouseup",this._onMouseup),this._resizer.style.cursor=this._horz?"ew-resize":"ns-resize",document.body.style.removeProperty("cursor"),this._sidea.style.removeProperty("user-select"),this._sidea.style.removeProperty("pointer-events"),this._sideb.style.removeProperty("user-select"),this._sideb.style.removeProperty("pointer-events"),this._notify("resize",{awidth:this._sidea.style.width,aheight:this._sidea.style.height,bwidth:this._sideb.style.width,bheight:this._sideb.style.height})}}S.component({id:"oid:split-pane",element:"split-pane-oid",properties:{split:{default:"horizontal"},proportion:{default:"50%"}},implementation:je,stylesheets:"default",styles:U`
  .group {
    display: flex;
    width: 100%;
    height: 100%;
  }
  .pane-b {
    flex: 1;
  }`,template:v`
  <div id="oid-prs" class="group">
    <div class="bg-base" id="sidea"><slot name="side-a"></slot></div>
    <div class="divide" id="resizer" @mousedown></div>
    <div class="pane-b bg-base" id="sideb"><slot name="side-b"></slot></div>
  </div>`});class Me extends P{async connectedCallback(){super.connectedCallback(),this._toInitial=this.initial,this._updateVisualState(),this._observer=new MutationObserver(this._updateVisualState.bind(this)),this._observer.observe(this,{childList:!0,subtree:!0})}_updateVisualState(){this._toInitial!=null&&(this._state=this.querySelector(`#${this._toInitial}`),this._state!=null&&(this._toInitial=null));const e=this.querySelectorAll("*");for(let t=0;t<e.length;t++){const i=e[t];this._state==null&&(this._state=i),i===this._state&&i.style.display!=null?i.style.removeProperty("display"):(i.style.display==null||i.style.display!=="none")&&(i.style.display="none")}}handleFirst(){this._state=this.firstElementChild,this._updateVisualState()}handleNext(){if(this._state!=null){let e=this._state.nextElementSibling;e==null&&(e=this.firstElementChild),this._state=e,this._updateVisualState()}}handlePrev(){if(this._state!=null){let e=this._state.previousElementSibling;e==null&&(e=this.lastElementChild),this._state=e,this._updateVisualState()}}handleLast(){this._state=this.lastElementChild,this._updateVisualState()}handleState(e,t){this._state=this.querySelector(`#${t.value}`),this._updateVisualState()}}S.component({id:"oid:state-pane",element:"state-pane-oid",properties:{initial:{}},receive:["first","next","prev","last","state"],implementation:Me,stylesheets:"default"});function qe(s,e){return function(){return s.apply(e,arguments)}}const{toString:xt}=Object.prototype,{getPrototypeOf:me}=Object,{iterator:se,toStringTag:He}=Symbol,ie=(s=>e=>{const t=xt.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),F=s=>(s=s.toLowerCase(),e=>ie(e)===s),ne=s=>e=>typeof e===s,{isArray:W}=Array,G=ne("undefined");function Q(s){return s!==null&&!G(s)&&s.constructor!==null&&!G(s.constructor)&&C(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const ze=F("ArrayBuffer");function Tt(s){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(s):e=s&&s.buffer&&ze(s.buffer),e}const Ct=ne("string"),C=ne("function"),Ie=ne("number"),Z=s=>s!==null&&typeof s=="object",kt=s=>s===!0||s===!1,re=s=>{if(ie(s)!=="object")return!1;const e=me(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(He in s)&&!(se in s)},Nt=s=>{if(!Z(s)||Q(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},Pt=F("Date"),Lt=F("File"),Ft=F("Blob"),Ut=F("FileList"),Dt=s=>Z(s)&&C(s.pipe),Bt=s=>{let e;return s&&(typeof FormData=="function"&&s instanceof FormData||C(s.append)&&((e=ie(s))==="formdata"||e==="object"&&C(s.toString)&&s.toString()==="[object FormData]"))},jt=F("URLSearchParams"),[Mt,qt,Ht,zt]=["ReadableStream","Request","Response","Headers"].map(F),It=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Y(s,e,{allOwnKeys:t=!1}={}){if(s===null||typeof s>"u")return;let i,n;if(typeof s!="object"&&(s=[s]),W(s))for(i=0,n=s.length;i<n;i++)e.call(null,s[i],i,s);else{if(Q(s))return;const r=t?Object.getOwnPropertyNames(s):Object.keys(s),o=r.length;let l;for(i=0;i<o;i++)l=r[i],e.call(null,s[l],l,s)}}function $e(s,e){if(Q(s))return null;e=e.toLowerCase();const t=Object.keys(s);let i=t.length,n;for(;i-- >0;)if(n=t[i],e===n.toLowerCase())return n;return null}const I=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Je=s=>!G(s)&&s!==I;function be(){const{caseless:s}=Je(this)&&this||{},e={},t=(i,n)=>{const r=s&&$e(e,n)||n;re(e[r])&&re(i)?e[r]=be(e[r],i):re(i)?e[r]=be({},i):W(i)?e[r]=i.slice():e[r]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&Y(arguments[i],t);return e}const $t=(s,e,t,{allOwnKeys:i}={})=>(Y(e,(n,r)=>{t&&C(n)?s[r]=qe(n,t):s[r]=n},{allOwnKeys:i}),s),Jt=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),Vt=(s,e,t,i)=>{s.prototype=Object.create(e.prototype,i),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:e.prototype}),t&&Object.assign(s.prototype,t)},Wt=(s,e,t,i)=>{let n,r,o;const l={};if(e=e||{},s==null)return e;do{for(n=Object.getOwnPropertyNames(s),r=n.length;r-- >0;)o=n[r],(!i||i(o,s,e))&&!l[o]&&(e[o]=s[o],l[o]=!0);s=t!==!1&&me(s)}while(s&&(!t||t(s,e))&&s!==Object.prototype);return e},Kt=(s,e,t)=>{s=String(s),(t===void 0||t>s.length)&&(t=s.length),t-=e.length;const i=s.indexOf(e,t);return i!==-1&&i===t},Xt=s=>{if(!s)return null;if(W(s))return s;let e=s.length;if(!Ie(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=s[e];return t},Gt=(s=>e=>s&&e instanceof s)(typeof Uint8Array<"u"&&me(Uint8Array)),Qt=(s,e)=>{const i=(s&&s[se]).call(s);let n;for(;(n=i.next())&&!n.done;){const r=n.value;e.call(s,r[0],r[1])}},Zt=(s,e)=>{let t;const i=[];for(;(t=s.exec(e))!==null;)i.push(t);return i},Yt=F("HTMLFormElement"),es=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,n){return i.toUpperCase()+n}),Ve=(({hasOwnProperty:s})=>(e,t)=>s.call(e,t))(Object.prototype),ts=F("RegExp"),We=(s,e)=>{const t=Object.getOwnPropertyDescriptors(s),i={};Y(t,(n,r)=>{let o;(o=e(n,r,s))!==!1&&(i[r]=o||n)}),Object.defineProperties(s,i)},ss=s=>{We(s,(e,t)=>{if(C(s)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=s[t];if(C(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},is=(s,e)=>{const t={},i=n=>{n.forEach(r=>{t[r]=!0})};return W(s)?i(s):i(String(s).split(e)),t},ns=()=>{},rs=(s,e)=>s!=null&&Number.isFinite(s=+s)?s:e;function os(s){return!!(s&&C(s.append)&&s[He]==="FormData"&&s[se])}const ls=s=>{const e=new Array(10),t=(i,n)=>{if(Z(i)){if(e.indexOf(i)>=0)return;if(Q(i))return i;if(!("toJSON"in i)){e[n]=i;const r=W(i)?[]:{};return Y(i,(o,l)=>{const u=t(o,n+1);!G(u)&&(r[l]=u)}),e[n]=void 0,r}}return i};return t(s,0)},as=F("AsyncFunction"),cs=s=>s&&(Z(s)||C(s))&&C(s.then)&&C(s.catch),Ke=((s,e)=>s?setImmediate:e?((t,i)=>(I.addEventListener("message",({source:n,data:r})=>{n===I&&r===t&&i.length&&i.shift()()},!1),n=>{i.push(n),I.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",C(I.postMessage)),us=typeof queueMicrotask<"u"?queueMicrotask.bind(I):typeof process<"u"&&process.nextTick||Ke,a={isArray:W,isArrayBuffer:ze,isBuffer:Q,isFormData:Bt,isArrayBufferView:Tt,isString:Ct,isNumber:Ie,isBoolean:kt,isObject:Z,isPlainObject:re,isEmptyObject:Nt,isReadableStream:Mt,isRequest:qt,isResponse:Ht,isHeaders:zt,isUndefined:G,isDate:Pt,isFile:Lt,isBlob:Ft,isRegExp:ts,isFunction:C,isStream:Dt,isURLSearchParams:jt,isTypedArray:Gt,isFileList:Ut,forEach:Y,merge:be,extend:$t,trim:It,stripBOM:Jt,inherits:Vt,toFlatObject:Wt,kindOf:ie,kindOfTest:F,endsWith:Kt,toArray:Xt,forEachEntry:Qt,matchAll:Zt,isHTMLForm:Yt,hasOwnProperty:Ve,hasOwnProp:Ve,reduceDescriptors:We,freezeMethods:ss,toObjectSet:is,toCamelCase:es,noop:ns,toFiniteNumber:rs,findKey:$e,global:I,isContextDefined:Je,isSpecCompliantForm:os,toJSONObject:ls,isAsyncFn:as,isThenable:cs,setImmediate:Ke,asap:us,isIterable:s=>s!=null&&C(s[se])};function b(s,e,t,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),n&&(this.response=n,this.status=n.status?n.status:null)}a.inherits(b,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:a.toJSONObject(this.config),code:this.code,status:this.status}}});const Xe=b.prototype,Ge={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Ge[s]={value:s}}),Object.defineProperties(b,Ge),Object.defineProperty(Xe,"isAxiosError",{value:!0}),b.from=(s,e,t,i,n,r)=>{const o=Object.create(Xe);return a.toFlatObject(s,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),b.call(o,s.message,e,t,i,n),o.cause=s,o.name=s.name,r&&Object.assign(o,r),o};const ds=null;function ye(s){return a.isPlainObject(s)||a.isArray(s)}function Qe(s){return a.endsWith(s,"[]")?s.slice(0,-2):s}function Ze(s,e,t){return s?s.concat(e).map(function(n,r){return n=Qe(n),!t&&r?"["+n+"]":n}).join(t?".":""):e}function hs(s){return a.isArray(s)&&!s.some(ye)}const fs=a.toFlatObject(a,{},null,function(e){return/^is[A-Z]/.test(e)});function oe(s,e,t){if(!a.isObject(s))throw new TypeError("target must be an object");e=e||new FormData,t=a.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,p){return!a.isUndefined(p[m])});const i=t.metaTokens,n=t.visitor||d,r=t.dots,o=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&a.isSpecCompliantForm(e);if(!a.isFunction(n))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(a.isDate(h))return h.toISOString();if(a.isBoolean(h))return h.toString();if(!u&&a.isBlob(h))throw new b("Blob is not supported. Use a Buffer instead.");return a.isArrayBuffer(h)||a.isTypedArray(h)?u&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function d(h,m,p){let A=h;if(h&&!p&&typeof h=="object"){if(a.endsWith(m,"{}"))m=i?m:m.slice(0,-2),h=JSON.stringify(h);else if(a.isArray(h)&&hs(h)||(a.isFileList(h)||a.endsWith(m,"[]"))&&(A=a.toArray(h)))return m=Qe(m),A.forEach(function(x,B){!(a.isUndefined(x)||x===null)&&e.append(o===!0?Ze([m],B,r):o===null?m:m+"[]",c(x))}),!1}return ye(h)?!0:(e.append(Ze(p,m,r),c(h)),!1)}const f=[],w=Object.assign(fs,{defaultVisitor:d,convertValue:c,isVisitable:ye});function y(h,m){if(!a.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(h),a.forEach(h,function(A,O){(!(a.isUndefined(A)||A===null)&&n.call(e,A,a.isString(O)?O.trim():O,m,w))===!0&&y(A,m?m.concat(O):[O])}),f.pop()}}if(!a.isObject(s))throw new TypeError("data must be an object");return y(s),e}function Ye(s){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function _e(s,e){this._pairs=[],s&&oe(s,this,e)}const et=_e.prototype;et.append=function(e,t){this._pairs.push([e,t])},et.toString=function(e){const t=e?function(i){return e.call(this,i,Ye)}:Ye;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};function ps(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tt(s,e,t){if(!e)return s;const i=t&&t.encode||ps;a.isFunction(t)&&(t={serialize:t});const n=t&&t.serialize;let r;if(n?r=n(e,t):r=a.isURLSearchParams(e)?e.toString():new _e(e,t).toString(i),r){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}class st{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){a.forEach(this.handlers,function(i){i!==null&&e(i)})}}const it={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ms={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:_e,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},ge=typeof window<"u"&&typeof document<"u",we=typeof navigator=="object"&&navigator||void 0,bs=ge&&(!we||["ReactNative","NativeScript","NS"].indexOf(we.product)<0),ys=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_s=ge&&window.location.href||"http://localhost",T={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ge,hasStandardBrowserEnv:bs,hasStandardBrowserWebWorkerEnv:ys,navigator:we,origin:_s},Symbol.toStringTag,{value:"Module"})),...ms};function gs(s,e){return oe(s,new T.classes.URLSearchParams,{visitor:function(t,i,n,r){return T.isNode&&a.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function ws(s){return a.matchAll(/\w+|\[(\w*)]/g,s).map(e=>e[0]==="[]"?"":e[1]||e[0])}function vs(s){const e={},t=Object.keys(s);let i;const n=t.length;let r;for(i=0;i<n;i++)r=t[i],e[r]=s[r];return e}function nt(s){function e(t,i,n,r){let o=t[r++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=r>=t.length;return o=!o&&a.isArray(n)?n.length:o,u?(a.hasOwnProp(n,o)?n[o]=[n[o],i]:n[o]=i,!l):((!n[o]||!a.isObject(n[o]))&&(n[o]=[]),e(t,i,n[o],r)&&a.isArray(n[o])&&(n[o]=vs(n[o])),!l)}if(a.isFormData(s)&&a.isFunction(s.entries)){const t={};return a.forEachEntry(s,(i,n)=>{e(ws(i),n,t,0)}),t}return null}function Ss(s,e,t){if(a.isString(s))try{return(e||JSON.parse)(s),a.trim(s)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(s)}const ee={transitional:it,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",n=i.indexOf("application/json")>-1,r=a.isObject(e);if(r&&a.isHTMLForm(e)&&(e=new FormData(e)),a.isFormData(e))return n?JSON.stringify(nt(e)):e;if(a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)||a.isReadableStream(e))return e;if(a.isArrayBufferView(e))return e.buffer;if(a.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return gs(e,this.formSerializer).toString();if((l=a.isFileList(e))||i.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return oe(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return r||n?(t.setContentType("application/json",!1),Ss(e)):e}],transformResponse:[function(e){const t=this.transitional||ee.transitional,i=t&&t.forcedJSONParsing,n=this.responseType==="json";if(a.isResponse(e)||a.isReadableStream(e))return e;if(e&&a.isString(e)&&(i&&!this.responseType||n)){const o=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?b.from(l,b.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:T.classes.FormData,Blob:T.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};a.forEach(["delete","get","head","post","put","patch"],s=>{ee.headers[s]={}});const Rs=a.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Es=s=>{const e={};let t,i,n;return s&&s.split(`
`).forEach(function(o){n=o.indexOf(":"),t=o.substring(0,n).trim().toLowerCase(),i=o.substring(n+1).trim(),!(!t||e[t]&&Rs[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},rt=Symbol("internals");function te(s){return s&&String(s).trim().toLowerCase()}function le(s){return s===!1||s==null?s:a.isArray(s)?s.map(le):String(s)}function As(s){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(s);)e[i[1]]=i[2];return e}const Os=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function ve(s,e,t,i,n){if(a.isFunction(i))return i.call(this,e,t);if(n&&(e=t),!!a.isString(e)){if(a.isString(i))return e.indexOf(i)!==-1;if(a.isRegExp(i))return i.test(e)}}function xs(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function Ts(s,e){const t=a.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(s,i+t,{value:function(n,r,o){return this[i].call(this,e,n,r,o)},configurable:!0})})}let k=class{constructor(e){e&&this.set(e)}set(e,t,i){const n=this;function r(l,u,c){const d=te(u);if(!d)throw new Error("header name must be a non-empty string");const f=a.findKey(n,d);(!f||n[f]===void 0||c===!0||c===void 0&&n[f]!==!1)&&(n[f||u]=le(l))}const o=(l,u)=>a.forEach(l,(c,d)=>r(c,d,u));if(a.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(a.isString(e)&&(e=e.trim())&&!Os(e))o(Es(e),t);else if(a.isObject(e)&&a.isIterable(e)){let l={},u,c;for(const d of e){if(!a.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[c=d[0]]=(u=l[c])?a.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}o(l,t)}else e!=null&&r(t,e,i);return this}get(e,t){if(e=te(e),e){const i=a.findKey(this,e);if(i){const n=this[i];if(!t)return n;if(t===!0)return As(n);if(a.isFunction(t))return t.call(this,n,i);if(a.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=te(e),e){const i=a.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||ve(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let n=!1;function r(o){if(o=te(o),o){const l=a.findKey(i,o);l&&(!t||ve(i,i[l],l,t))&&(delete i[l],n=!0)}}return a.isArray(e)?e.forEach(r):r(e),n}clear(e){const t=Object.keys(this);let i=t.length,n=!1;for(;i--;){const r=t[i];(!e||ve(this,this[r],r,e,!0))&&(delete this[r],n=!0)}return n}normalize(e){const t=this,i={};return a.forEach(this,(n,r)=>{const o=a.findKey(i,r);if(o){t[o]=le(n),delete t[r];return}const l=e?xs(r):String(r).trim();l!==r&&delete t[r],t[l]=le(n),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return a.forEach(this,(i,n)=>{i!=null&&i!==!1&&(t[n]=e&&a.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(n=>i.set(n)),i}static accessor(e){const i=(this[rt]=this[rt]={accessors:{}}).accessors,n=this.prototype;function r(o){const l=te(o);i[l]||(Ts(n,o),i[l]=!0)}return a.isArray(e)?e.forEach(r):r(e),this}};k.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),a.reduceDescriptors(k.prototype,({value:s},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>s,set(i){this[t]=i}}}),a.freezeMethods(k);function Se(s,e){const t=this||ee,i=e||t,n=k.from(i.headers);let r=i.data;return a.forEach(s,function(l){r=l.call(t,r,n.normalize(),e?e.status:void 0)}),n.normalize(),r}function ot(s){return!!(s&&s.__CANCEL__)}function K(s,e,t){b.call(this,s??"canceled",b.ERR_CANCELED,e,t),this.name="CanceledError"}a.inherits(K,b,{__CANCEL__:!0});function lt(s,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?s(t):e(new b("Request failed with status code "+t.status,[b.ERR_BAD_REQUEST,b.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Cs(s){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return e&&e[1]||""}function ks(s,e){s=s||10;const t=new Array(s),i=new Array(s);let n=0,r=0,o;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),d=i[r];o||(o=c),t[n]=u,i[n]=c;let f=r,w=0;for(;f!==n;)w+=t[f++],f=f%s;if(n=(n+1)%s,n===r&&(r=(r+1)%s),c-o<e)return;const y=d&&c-d;return y?Math.round(w*1e3/y):void 0}}function Ns(s,e){let t=0,i=1e3/e,n,r;const o=(c,d=Date.now())=>{t=d,n=null,r&&(clearTimeout(r),r=null),s(...c)};return[(...c)=>{const d=Date.now(),f=d-t;f>=i?o(c,d):(n=c,r||(r=setTimeout(()=>{r=null,o(n)},i-f)))},()=>n&&o(n)]}const ae=(s,e,t=3)=>{let i=0;const n=ks(50,250);return Ns(r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,u=o-i,c=n(u),d=o<=l;i=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:c||void 0,estimated:c&&l&&d?(l-o)/c:void 0,event:r,lengthComputable:l!=null,[e?"download":"upload"]:!0};s(f)},t)},at=(s,e)=>{const t=s!=null;return[i=>e[0]({lengthComputable:t,total:s,loaded:i}),e[1]]},ct=s=>(...e)=>a.asap(()=>s(...e)),Ps=T.hasStandardBrowserEnv?((s,e)=>t=>(t=new URL(t,T.origin),s.protocol===t.protocol&&s.host===t.host&&(e||s.port===t.port)))(new URL(T.origin),T.navigator&&/(msie|trident)/i.test(T.navigator.userAgent)):()=>!0,Ls=T.hasStandardBrowserEnv?{write(s,e,t,i,n,r){const o=[s+"="+encodeURIComponent(e)];a.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),a.isString(i)&&o.push("path="+i),a.isString(n)&&o.push("domain="+n),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(s){const e=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Fs(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function Us(s,e){return e?s.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):s}function ut(s,e,t){let i=!Fs(e);return s&&(i||t==!1)?Us(s,e):e}const dt=s=>s instanceof k?{...s}:s;function $(s,e){e=e||{};const t={};function i(c,d,f,w){return a.isPlainObject(c)&&a.isPlainObject(d)?a.merge.call({caseless:w},c,d):a.isPlainObject(d)?a.merge({},d):a.isArray(d)?d.slice():d}function n(c,d,f,w){if(a.isUndefined(d)){if(!a.isUndefined(c))return i(void 0,c,f,w)}else return i(c,d,f,w)}function r(c,d){if(!a.isUndefined(d))return i(void 0,d)}function o(c,d){if(a.isUndefined(d)){if(!a.isUndefined(c))return i(void 0,c)}else return i(void 0,d)}function l(c,d,f){if(f in e)return i(c,d);if(f in s)return i(void 0,c)}const u={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,d,f)=>n(dt(c),dt(d),f,!0)};return a.forEach(Object.keys({...s,...e}),function(d){const f=u[d]||n,w=f(s[d],e[d],d);a.isUndefined(w)&&f!==l||(t[d]=w)}),t}const ht=s=>{const e=$({},s);let{data:t,withXSRFToken:i,xsrfHeaderName:n,xsrfCookieName:r,headers:o,auth:l}=e;e.headers=o=k.from(o),e.url=tt(ut(e.baseURL,e.url,e.allowAbsoluteUrls),s.params,s.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(a.isFormData(t)){if(T.hasStandardBrowserEnv||T.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[c,...d]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(T.hasStandardBrowserEnv&&(i&&a.isFunction(i)&&(i=i(e)),i||i!==!1&&Ps(e.url))){const c=n&&r&&Ls.read(r);c&&o.set(n,c)}return e},Ds=typeof XMLHttpRequest<"u"&&function(s){return new Promise(function(t,i){const n=ht(s);let r=n.data;const o=k.from(n.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:c}=n,d,f,w,y,h;function m(){y&&y(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let p=new XMLHttpRequest;p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout;function A(){if(!p)return;const x=k.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:x,config:s,request:p};lt(function(V){t(V),m()},function(V){i(V),m()},N),p=null}"onloadend"in p?p.onloadend=A:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(A)},p.onabort=function(){p&&(i(new b("Request aborted",b.ECONNABORTED,s,p)),p=null)},p.onerror=function(){i(new b("Network Error",b.ERR_NETWORK,s,p)),p=null},p.ontimeout=function(){let B=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const N=n.transitional||it;n.timeoutErrorMessage&&(B=n.timeoutErrorMessage),i(new b(B,N.clarifyTimeoutError?b.ETIMEDOUT:b.ECONNABORTED,s,p)),p=null},r===void 0&&o.setContentType(null),"setRequestHeader"in p&&a.forEach(o.toJSON(),function(B,N){p.setRequestHeader(N,B)}),a.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),l&&l!=="json"&&(p.responseType=n.responseType),c&&([w,h]=ae(c,!0),p.addEventListener("progress",w)),u&&p.upload&&([f,y]=ae(u),p.upload.addEventListener("progress",f),p.upload.addEventListener("loadend",y)),(n.cancelToken||n.signal)&&(d=x=>{p&&(i(!x||x.type?new K(null,s,p):x),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const O=Cs(n.url);if(O&&T.protocols.indexOf(O)===-1){i(new b("Unsupported protocol "+O+":",b.ERR_BAD_REQUEST,s));return}p.send(r||null)})},Bs=(s,e)=>{const{length:t}=s=s?s.filter(Boolean):[];if(e||t){let i=new AbortController,n;const r=function(c){if(!n){n=!0,l();const d=c instanceof Error?c:this.reason;i.abort(d instanceof b?d:new K(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,r(new b(`timeout ${e} of ms exceeded`,b.ETIMEDOUT))},e);const l=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),s=null)};s.forEach(c=>c.addEventListener("abort",r));const{signal:u}=i;return u.unsubscribe=()=>a.asap(l),u}},js=function*(s,e){let t=s.byteLength;if(t<e){yield s;return}let i=0,n;for(;i<t;)n=i+e,yield s.slice(i,n),i=n},Ms=async function*(s,e){for await(const t of qs(s))yield*js(t,e)},qs=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const e=s.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},ft=(s,e,t,i)=>{const n=Ms(s,e);let r=0,o,l=u=>{o||(o=!0,i&&i(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await n.next();if(c){l(),u.close();return}let f=d.byteLength;if(t){let w=r+=f;t(w)}u.enqueue(new Uint8Array(d))}catch(c){throw l(c),c}},cancel(u){return l(u),n.return()}},{highWaterMark:2})},ce=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pt=ce&&typeof ReadableStream=="function",Hs=ce&&(typeof TextEncoder=="function"?(s=>e=>s.encode(e))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),mt=(s,...e)=>{try{return!!s(...e)}catch{return!1}},zs=pt&&mt(()=>{let s=!1;const e=new Request(T.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!e}),bt=64*1024,Re=pt&&mt(()=>a.isReadableStream(new Response("").body)),ue={stream:Re&&(s=>s.body)};ce&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ue[e]&&(ue[e]=a.isFunction(s[e])?t=>t[e]():(t,i)=>{throw new b(`Response type '${e}' is not supported`,b.ERR_NOT_SUPPORT,i)})})})(new Response);const Is=async s=>{if(s==null)return 0;if(a.isBlob(s))return s.size;if(a.isSpecCompliantForm(s))return(await new Request(T.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(a.isArrayBufferView(s)||a.isArrayBuffer(s))return s.byteLength;if(a.isURLSearchParams(s)&&(s=s+""),a.isString(s))return(await Hs(s)).byteLength},$s=async(s,e)=>{const t=a.toFiniteNumber(s.getContentLength());return t??Is(e)},Ee={http:ds,xhr:Ds,fetch:ce&&(async s=>{let{url:e,method:t,data:i,signal:n,cancelToken:r,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:c,headers:d,withCredentials:f="same-origin",fetchOptions:w}=ht(s);c=c?(c+"").toLowerCase():"text";let y=Bs([n,r&&r.toAbortSignal()],o),h;const m=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let p;try{if(u&&zs&&t!=="get"&&t!=="head"&&(p=await $s(d,i))!==0){let N=new Request(e,{method:"POST",body:i,duplex:"half"}),q;if(a.isFormData(i)&&(q=N.headers.get("content-type"))&&d.setContentType(q),N.body){const[V,fe]=at(p,ae(ct(u)));i=ft(N.body,bt,V,fe)}}a.isString(f)||(f=f?"include":"omit");const A="credentials"in Request.prototype;h=new Request(e,{...w,signal:y,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",credentials:A?f:void 0});let O=await fetch(h,w);const x=Re&&(c==="stream"||c==="response");if(Re&&(l||x&&m)){const N={};["status","statusText","headers"].forEach(At=>{N[At]=O[At]});const q=a.toFiniteNumber(O.headers.get("content-length")),[V,fe]=l&&at(q,ae(ct(l),!0))||[];O=new Response(ft(O.body,bt,V,()=>{fe&&fe(),m&&m()}),N)}c=c||"text";let B=await ue[a.findKey(ue,c)||"text"](O,s);return!x&&m&&m(),await new Promise((N,q)=>{lt(N,q,{data:B,headers:k.from(O.headers),status:O.status,statusText:O.statusText,config:s,request:h})})}catch(A){throw m&&m(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new b("Network Error",b.ERR_NETWORK,s,h),{cause:A.cause||A}):b.from(A,A&&A.code,s,h)}})};a.forEach(Ee,(s,e)=>{if(s){try{Object.defineProperty(s,"name",{value:e})}catch{}Object.defineProperty(s,"adapterName",{value:e})}});const yt=s=>`- ${s}`,Js=s=>a.isFunction(s)||s===null||s===!1,_t={getAdapter:s=>{s=a.isArray(s)?s:[s];const{length:e}=s;let t,i;const n={};for(let r=0;r<e;r++){t=s[r];let o;if(i=t,!Js(t)&&(i=Ee[(o=String(t)).toLowerCase()],i===void 0))throw new b(`Unknown adapter '${o}'`);if(i)break;n[o||"#"+r]=i}if(!i){const r=Object.entries(n).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(yt).join(`
`):" "+yt(r[0]):"as no adapter specified";throw new b("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Ee};function Ae(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new K(null,s)}function gt(s){return Ae(s),s.headers=k.from(s.headers),s.data=Se.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),_t.getAdapter(s.adapter||ee.adapter)(s).then(function(i){return Ae(s),i.data=Se.call(s,s.transformResponse,i),i.headers=k.from(i.headers),i},function(i){return ot(i)||(Ae(s),i&&i.response&&(i.response.data=Se.call(s,s.transformResponse,i.response),i.response.headers=k.from(i.response.headers))),Promise.reject(i)})}const wt="1.11.0",de={};["object","boolean","number","function","string","symbol"].forEach((s,e)=>{de[s]=function(i){return typeof i===s||"a"+(e<1?"n ":" ")+s}});const vt={};de.transitional=function(e,t,i){function n(r,o){return"[Axios v"+wt+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,l)=>{if(e===!1)throw new b(n(o," has been removed"+(t?" in "+t:"")),b.ERR_DEPRECATED);return t&&!vt[o]&&(vt[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,l):!0}},de.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Vs(s,e,t){if(typeof s!="object")throw new b("options must be an object",b.ERR_BAD_OPTION_VALUE);const i=Object.keys(s);let n=i.length;for(;n-- >0;){const r=i[n],o=e[r];if(o){const l=s[r],u=l===void 0||o(l,r,s);if(u!==!0)throw new b("option "+r+" must be "+u,b.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new b("Unknown option "+r,b.ERR_BAD_OPTION)}}const he={assertOptions:Vs,validators:de},D=he.validators;let J=class{constructor(e){this.defaults=e||{},this.interceptors={request:new st,response:new st}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const r=n.stack?n.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=$(this.defaults,t);const{transitional:i,paramsSerializer:n,headers:r}=t;i!==void 0&&he.assertOptions(i,{silentJSONParsing:D.transitional(D.boolean),forcedJSONParsing:D.transitional(D.boolean),clarifyTimeoutError:D.transitional(D.boolean)},!1),n!=null&&(a.isFunction(n)?t.paramsSerializer={serialize:n}:he.assertOptions(n,{encode:D.function,serialize:D.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),he.assertOptions(t,{baseUrl:D.spelling("baseURL"),withXsrfToken:D.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&a.merge(r.common,r[t.method]);r&&a.forEach(["delete","get","head","post","put","patch","common"],h=>{delete r[h]}),t.headers=k.concat(o,r);const l=[];let u=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(u=u&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let d,f=0,w;if(!u){const h=[gt.bind(this),void 0];for(h.unshift(...l),h.push(...c),w=h.length,d=Promise.resolve(t);f<w;)d=d.then(h[f++],h[f++]);return d}w=l.length;let y=t;for(f=0;f<w;){const h=l[f++],m=l[f++];try{y=h(y)}catch(p){m.call(this,p);break}}try{d=gt.call(this,y)}catch(h){return Promise.reject(h)}for(f=0,w=c.length;f<w;)d=d.then(c[f++],c[f++]);return d}getUri(e){e=$(this.defaults,e);const t=ut(e.baseURL,e.url,e.allowAbsoluteUrls);return tt(t,e.params,e.paramsSerializer)}};a.forEach(["delete","get","head","options"],function(e){J.prototype[e]=function(t,i){return this.request($(i||{},{method:e,url:t,data:(i||{}).data}))}}),a.forEach(["post","put","patch"],function(e){function t(i){return function(r,o,l){return this.request($(l||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}J.prototype[e]=t(),J.prototype[e+"Form"]=t(!0)});let Ws=class Ot{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const i=this;this.promise.then(n=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](n);i._listeners=null}),this.promise.then=n=>{let r;const o=new Promise(l=>{i.subscribe(l),r=l}).then(n);return o.cancel=function(){i.unsubscribe(r)},o},e(function(r,o,l){i.reason||(i.reason=new K(r,o,l),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Ot(function(n){e=n}),cancel:e}}};function Ks(s){return function(t){return s.apply(null,t)}}function Xs(s){return a.isObject(s)&&s.isAxiosError===!0}const Oe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Oe).forEach(([s,e])=>{Oe[e]=s});function St(s){const e=new J(s),t=qe(J.prototype.request,e);return a.extend(t,J.prototype,e,{allOwnKeys:!0}),a.extend(t,e,null,{allOwnKeys:!0}),t.create=function(n){return St($(s,n))},t}const E=St(ee);E.Axios=J,E.CanceledError=K,E.CancelToken=Ws,E.isCancel=ot,E.VERSION=wt,E.toFormData=oe,E.AxiosError=b,E.Cancel=E.CanceledError,E.all=function(e){return Promise.all(e)},E.spread=Ks,E.isAxiosError=Xs,E.mergeConfig=$,E.AxiosHeaders=k,E.formToJSON=s=>nt(a.isHTMLForm(s)?new FormData(s):s),E.getAdapter=_t.getAdapter,E.HttpStatusCode=Oe,E.default=E;const{Axios:ri,AxiosError:oi,CanceledError:li,isCancel:ai,CancelToken:ci,VERSION:ui,all:di,Cancel:hi,isAxiosError:fi,spread:pi,toFormData:mi,AxiosHeaders:bi,HttpStatusCode:yi,formToJSON:_i,getAdapter:gi,mergeConfig:wi}=E;class Rt extends M{async handleGet(e,t){await this._restRequest("GET",e,t)}async handlePost(e,t){await this._restRequest("POST",e,t)}async handlePut(e,t){await this._restRequest("PUT",e,t)}async handleDelete(e,t){await this._restRequest("DELETE",e,t)}async _restRequest(e,t,i){let n=null,r={};i!=null&&(r=typeof i.value=="object"?i.value:i),console.log("=== parameters"),console.log(r);const o=this._getCustomField("api");if(o!=null&&o.environment!=null)for(let l in o.environment)r[l]=o.environment[l];if(this.parameters!=null){const l=this.parameters.split(";");for(const u of l){const c=u.split(":");r[c[0]]=c[1]}}if(o!=null&&o.oas!=null&&o.oas.paths!=null){const l=Object.keys(o.oas.paths);if(l.length>0){let u=l[0];const c=t.split("/");if(console.log("=== noticeParts"),console.log(c),c.length>1){const y=c[0],h=c[1];for(let m of l)if(o.oas.paths[m][y]&&o.oas.paths[m][y].operationId==h){u=m;break}}console.log("=== pathKey"),console.log(u);let d=u;for(let y in r)d=d.replace("{"+y+"}",r[y]);console.log("=== url"),console.log(d);const f={method:e.toUpperCase(),url:d,withCredentials:!0};let w=o.oas.paths[u];if(w[e]!=null&&w[e].parameters!=null){let y={};for(let h of w[e].parameters)h.in!=null&&h.in=="query"&&(y[h.name]=r[h.name]);f.method=="GET"?f.params=y:f.data=y}await E(f).then(function(y){n=y.data}).catch(function(y){n={error:y.response!=null?y.response.data!=null&&y.response.data.error!=null?y.response.data.error:{code:y.response.status?y.response.status:500,message:y.message}:{code:500,message:y.message}}})}}this._notify("dispatch",{value:n})}}S.component({id:"oid:rest",element:"rest-oid",properties:{parameters:{}},receive:["get","post","put","delete"],implementation:Rt});class Et extends M{connectedCallback(){super.connectedCallback(),this._space=document.querySelector(`#${this.space}`)}handleUpdate(e,t){var i;this.space!=null&&((i=t.value)!=null&&i[this.source])&&(this.space.innerHTML=t.value[this.source])}}S.component({id:"oid:platform",element:"platform-oid",properties:{space:{default:"platform-oid-space"},source:{default:"source"}},receive:["update"],implementation:Et}),_.Bus=j,_.ButtonOid=Le,_.ConsoleOid=Fe,_.FileOid=Ce,_.ImageOid=Pe,_.JSONFileOid=Ne,_.LocalStorageOid=ke,_.Oid=S,_.OidBase=pe,_.OidPlay=L,_.OidSphere=z,_.OidUI=P,_.OidWeb=M,_.PlatformOid=Et,_.Primitive=xe,_.RESTOid=Rt,_.SliderOid=Be,_.Sphere=R,_.SplitPaneOid=je,_.StatePaneOid=Me,_.SubmitOid=Te,_.SwitchOid=De,_.css=U,_.html=v,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})});
